
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text Normalization (Chinese) &#8212; Python Notes for Linguistics</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-dropdown.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Machine Learning with Sci-Kit Learn" href="sklearn.html" />
    <link rel="prev" title="Text Normalization (English)" href="text-normalization-eng.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/ntnu03.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Python Notes for Linguistics</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../python-basics/python-basics.html">
   Python Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../corpus/corpus-processing.html">
   Corpus Linguistics with Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../statistical-analyses/statistical-analyses.html">
   Statistical Analyses
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="reference internal" href="nlp.html">
   Natural Language Processing with Python
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="nlp-spacy.html">
     Natural Language Processing (spaCy)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="nlp-spacy-zh.html">
     Chinese Natural Language Processing (spaCy)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="nlp-ckipnlp.html">
     Natural Language Processing (ckipnlp)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-normalization-eng.html">
     Text Normalization (English)
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Text Normalization (Chinese)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sklearn.html">
     Machine Learning with Sci-Kit Learn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sentiment-analysis-ml.html">
     Sentiment Analysis with Traditional Machine Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="word-embeddings.html">
     Word Embeddings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="word2vec-chinese.html">
     Word Embeddings with Chinese Texts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="word2vec.html">
     Word2Vec
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="doc2vec.html">
     Dov2Vec
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sentiment-analysis-dl.html">
     Sentiment Analysis with Deep Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sentiment-analysis-lstm-v1.html">
     Sentiment Analysis with LSTM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="seq-to-seq.html">
     Machine Translation (Sequence-to-Sequence LSTM)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-gen-lstm-v1.html">
     Text Generation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="transfer-learning-sent-encoding.html">
     Universal Sentence Embeddings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hyperparameter-tuning.html">
     Hyper-Parameter Tuning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sentiment-analysis-using-bert-chinese.html">
     Sentiment Analysis Using BERT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ktrain-tutorial-explaining-predictions.html">
     Explainable AI
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/todo.html">
   To-do List
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <div style="text-align:left">
    <a href="https://alvinchen.myftp.org/" target='_blank'>Alvin Chen's Homepage</a>
</div>

</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/nlp/text-normalization-chinese.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/alvinntnu/python-notes/master?urlpath=tree/nlp/text-normalization-chinese.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/alvinntnu/python-notes/blob/master/nlp/text-normalization-chinese.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#normalization-functions">
   Normalization Functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-an-article">
   Extract an Article
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="text-normalization-chinese">
<h1>Text Normalization (Chinese)<a class="headerlink" href="#text-normalization-chinese" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">text_normalizer_zh.py</span></code></p></li>
<li><p>Including functions for:</p>
<ul>
<li><p>word-seg chinese texts</p></li>
<li><p>clean up texts by removing duplicate spaces and line breaks</p></li>
<li><p>remove incompatible weird characters</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unicodedata</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="c1">#from nltk.corpus import wordnet</span>
<span class="c1">#import collections</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize.toktok</span> <span class="kn">import</span> <span class="n">ToktokTokenizer</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">text_normalizer_zh</span> <span class="k">as</span> <span class="nn">tnz</span>
 
</pre></div>
</div>
</div>
</div>
<div class="section" id="normalization-functions">
<h2>Normalization Functions<a class="headerlink" href="#normalization-functions" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load text_normalizer_zh.py</span>
<span class="kn">import</span> <span class="nn">unicodedata</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="c1">#from nltk.corpus import wordnet</span>
<span class="c1">#import collections</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize.toktok</span> <span class="kn">import</span> <span class="n">ToktokTokenizer</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1">## Normalize unicode characters</span>
<span class="k">def</span> <span class="nf">remove_weird_chars</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="c1">#     ```</span>
<span class="c1">#     (NFKD) will apply the compatibility decomposition, i.e. </span>
<span class="c1">#     replace all compatibility characters with their equivalents. </span>
<span class="c1">#     ```</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKD&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span>


<span class="c1">## Remove duplicate spaces</span>
<span class="k">def</span> <span class="nf">remove_extra_linebreaks</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\n+&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\s]+&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">remove_extra_spaces</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">s+&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">jieba</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">set_dictionary</span><span class="p">(</span><span class="s1">&#39;../../../RepositoryData/data/jiaba/dict.txt.jiebatw.txt&#39;</span><span class="p">)</span>

<span class="c1">## Word Segmentation</span>
<span class="k">def</span> <span class="nf">seg</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">return_list</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="n">text_seg</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">return_list</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">text_seg</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_seg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>


<span class="k">def</span> <span class="nf">remove_symbols</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[</span><span class="se">\u0021</span><span class="s1">-</span><span class="se">\u002f\u003a</span><span class="s1">-</span><span class="se">\u0040\u005b</span><span class="s1">-</span><span class="se">\u0060\u007b</span><span class="s1">-</span><span class="se">\u007e\u00a1</span><span class="s1">-</span><span class="se">\u00bf\u2000</span><span class="s1">-</span><span class="se">\u206f\u2013</span><span class="s1">-</span><span class="se">\u204a\u20a0</span><span class="s1">-</span><span class="se">\u20bf\u2100</span><span class="s1">-</span><span class="se">\u214f\u2150</span><span class="s1">-</span><span class="se">\u218b\u2190</span><span class="s1">-</span><span class="se">\u21ff\u2200</span><span class="s1">-</span><span class="se">\u22ff\u2300</span><span class="s1">-</span><span class="se">\u23ff\u2460</span><span class="s1">-</span><span class="se">\u24ff\u2500</span><span class="s1">-</span><span class="se">\u257f\u2580</span><span class="s1">-</span><span class="se">\u259f\u25a0</span><span class="s1">-</span><span class="se">\u25ff\u2600</span><span class="s1">-</span><span class="se">\u26ff\u2e00</span><span class="s1">-</span><span class="se">\u2e7f\u3000</span><span class="s1">-</span><span class="se">\u303f\ufe50</span><span class="s1">-</span><span class="se">\ufe6f\ufe30</span><span class="s1">-</span><span class="se">\ufe4f\ufe10</span><span class="s1">-</span><span class="se">\ufe1f\uff00</span><span class="s1">-</span><span class="se">\uffef</span><span class="s1">─◆╱]+&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span>

<span class="k">def</span> <span class="nf">remove_numbers</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">d+&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">remove_alphabets</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[a-zA-Z]+&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">normalize_corpus</span><span class="p">(</span><span class="n">corpus</span><span class="p">,</span> <span class="n">is_remove_extra_linebreaks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_remove_weird_chars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_seg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_remove_symbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_remove_numbers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_remove_alphabets</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_return_list</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    
    <span class="n">normalized_corpus</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># normalize each document in the corpus</span>
    <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="p">:</span>
        
        <span class="k">if</span> <span class="n">is_remove_extra_linebreaks</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">remove_extra_linebreaks</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">is_remove_weird_chars</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">remove_weird_chars</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
           
        <span class="k">if</span> <span class="n">is_seg</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">seg</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">is_return_list</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">is_remove_symbols</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">remove_symbols</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">is_remove_alphabets</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">remove_alphabets</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">is_remove_numbers</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">remove_numbers</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
            
        <span class="n">normalized_corpus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">remove_extra_spaces</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
        
    <span class="k">return</span> <span class="n">normalized_corpus</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="extract-an-article">
<h2>Extract an Article<a class="headerlink" href="#extract-an-article" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Grab the first article from Google news for demonstration</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://news.google.com/topics/CAAqJQgKIh9DQkFTRVFvSUwyMHZNRFptTXpJU0JYcG9MVlJYS0FBUAE?hl=zh-TW&amp;gl=TW&amp;ceid=TW%3Azh-Hant&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">web_content</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">web_content</span><span class="p">,</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
<span class="n">title</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;DY5T1d&#39;</span><span class="p">)</span>
<span class="n">first_art_link</span> <span class="o">=</span> <span class="n">title</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;https://news.google.com&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#print(first_art_link)</span>
<span class="n">art_request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">first_art_link</span><span class="p">)</span>
<span class="n">art_request</span><span class="o">.</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span>
<span class="n">soup_art</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">art_request</span><span class="o">.</span><span class="n">text</span><span class="p">,</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

<span class="n">art_content</span> <span class="o">=</span> <span class="n">soup_art</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
<span class="n">art_texts</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">art_content</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">art_texts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;今年國慶焰火昨晚在台南登場，湧入逾50萬人遊客，交通接駁嚴重打結，不少人在網路開轟，台南市長黃偉哲下午受訪時表示，千錯萬錯，都由他承擔，將加強檢討、改進，未來還有大型活動時，疏散計畫列為第一優先。&#39;, &#39;\n&#39;, &#39;\r\n山上花園水道博物館第70萬名遊客下午出爐，黃偉哲前往頒獎給幸運兒，對媒體詢問，國慶焰火交通疏運網路上批評聲音，黃偉哲強調，「會自我檢討」。&#39;, &#39;\n&#39;, &#39;\r\n黃偉哲說，昨晚國慶焰火100分，但地上交通以及相關設施等，遊客來得太多，是預估的2倍以上，衝擊交通，只能打70分，市政府團隊還是要努力。&#39;, &#39;\n&#39;, &#39;\r\n黃偉哲指出，昨晚的活動，警察認真維持治安，沒有重大案件，交通指揮至深夜，相當辛苦；清潔方面，環保局的同仁與志工們一樣很努力，忙到今天凌晨4點多，大家都很用心。&#39;, &#39;\n&#39;, &#39;\r\n黃偉哲表示，千錯萬錯，都是市政府，要自己改進、檢討，未來舉辦大型活動，交通疏運計畫列為第一優先，完成最妥善部署，希望做得更好。&#39;, &#39;\n                    昨天是雙十國慶日，不過有網友發現在Google搜尋「中華民國建立時間」，跳出來的時間竟然不是1912年1月1日，而是1949年12月7日，也就是中華民國政權遷往台灣的時間。                  &#39;, &#39;\n                    今年國慶焰火昨晚在台南登場，湧入逾50萬人遊客，交通接駁嚴重打結，不少人在網路開轟，台南市長黃偉哲下午受訪時表示，千錯萬...                  &#39;, &#39;\n                    前總統馬英九出席國民黨國慶升旗活動時，質疑民進黨真心誠意慶祝國慶嗎？新北市長侯友宜今天接受媒體訪問時說，中華民國「養我、...                  &#39;, &#39;\n                    國慶日剛過，蔡英文總統在臉書分享相關知識，提醒大家不要再稱禮賓人員是「金釵」。蔡總統說，今年國慶，大家可能都有看到穿著制...                  &#39;, &#39;\n                    在紐約僑界促成下，宣傳台灣觀光的形象廣告連兩年雙十節登上時報廣場大型螢幕。駐紐約辦事處長李光章形容，這為中華民國109歲...                  &#39;, &#39;\n                    台灣基進立委陳柏惟昨說，雙十正好吃霜食，祝大家「霜食節快樂」。前立委孫大千在臉書表示，擔任中華民國立委連句生日快樂都不敢...                  &#39;, &#39;\n                    波士頓市政府慶祝雙十國慶，今天循例在市府廣場升起中華民國國旗，展現對台友好。駐波士頓辦事處因應疫情改採線上慶祝，在臉書專...                  &#39;, &#39;\n                    受疫情影響，駐洛杉磯辦事處今年改在線上舉行雙十國慶活動。20多名美國政要、南加州僑領及友邦代表以視訊方式現身，祝中華民國...                  &#39;, &#39;\n                    紐約曼哈頓華埠今天歡慶中華民國109年雙十國慶，受疫情限制，活動簡化為升國旗、向國父銅像獻花及國慶茶會。雖少了封街遊行，...                  &#39;, &#39;\n                    兩岸關係為貿易環境埋下隱憂，蔡英文總統昨（10）日於國慶大會演說時，主動向陸方拋出邀請，她表示，只要北京當局有心化解對立...                  &#39;, &#39;\n                    昨天雙十國慶大會，面對新冠病毒威脅，蔡英文總統在演說時特別感謝防疫英雄，大會除由防疫英雄領唱國歌外，也安排「防疫英雄車隊...                  &#39;, &#39;\n                    針對總統蔡英文昨在國慶演說提出，兩岸的穩定是雙方共同責任，國內學者多認為蔡總統的用詞謹慎、避免刺激中國大陸，但大陸學者多...                  &#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Normalized results:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tnz</span><span class="o">.</span><span class="n">normalize_corpus</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">art_texts</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building prefix dict from /Users/Alvin/GoogleDrive/_MySyncDrive/RepositoryData/data/jiaba/dict.txt.jiebatw.txt ...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Loading model from cache /var/folders/n7/ltpzwx813c599nfxfb94s_640000gn/T/jieba.u1b52b47246a0f2e6497af6bbe107adac.cache
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Loading model cost 0.603 seconds.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Prefix dict has been built successfully.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;今年 國慶 焰火 昨晚 在 台南 登場 湧入 逾 萬人 遊客 交通 接駁 嚴重 打結 不少 人 在 網路 開轟 台南 市長 黃偉哲 下午 受訪 時 表示 千錯萬錯 都 由 他 承擔 將 加強 檢討 改進 未來 還有 大型 活動 時 疏散 計畫 列為 第一 優先 山上 花園 水道 博物館 第 萬名 遊客 下午 出爐 黃偉哲 前往 頒獎給 幸運兒 對 媒體 詢問 國慶 焰火 交通 疏運 網路 上 批評 聲音 黃偉哲 強調 會 自我 檢討 黃偉哲 說 昨晚 國慶 焰火 分 但 地上 交通 以及 相關 設施 等 遊客 來得 太多 是 預估 的 倍 以上 衝擊 交通 只能 打 分 市政府 團隊 還是 要 努力 黃偉哲 指出 昨晚 的 活動 警察 認真 維持 治安 沒有 重大 案件 交通 指揮 至 深夜 相當 辛苦 清潔 方面 環保局 的 同仁 與 志工 們 一樣 很 努力 忙 到 今天 凌晨 點多 大家 都 很 用心 黃偉哲 表示 千錯萬錯 都 是 市政府 要 自己 改進 檢討 未來 舉辦 大型 活動 交通 疏運 計畫 列為 第一 優先 完成 最 妥善 部署 希望 做 得 更 好 昨天 是 雙十國慶日 不過 有 網友 發現 在 搜尋 中華民國 建立 時間 跳出來 的 時間 竟然 不是 年 月 日 而是 年 月 日 也 就是 中華民國 政權 遷往 台灣 的 時間 今年 國慶 焰火 昨晚 在 台南 登場 湧入 逾 萬人 遊客 交通 接駁 嚴重 打結 不少 人 在 網路 開轟 台南 市長 黃偉哲 下午 受訪 時 表示 千錯萬 前總統 馬英九 出席 國民黨 國慶 升旗 活動 時 質疑 民進黨 真心誠意 慶祝 國慶 嗎 新北 市長 侯友宜 今天 接受 媒體 訪問 時 說 中華民國 養 我 國慶日 剛過 蔡英文 總統 在 臉書 分享 相關 知識 提醒 大家 不要 再稱 禮賓 人員 是 金釵 蔡 總統 說 今年 國慶 大家 可能 都 有 看到 穿著 制 在 紐約 僑界 促成 下 宣傳 台灣 觀光 的 形象 廣告 連兩年 雙十節 登上 時報 廣場 大型 螢幕 駐 紐約 辦事處 長 李光章 形容 這為 中華民國 歲 台灣 基進 立委 陳 柏惟 昨說 雙十 正好 吃霜食 祝 大家 霜 食節 快樂 前立委 孫大千 在 臉書 表示 擔任 中華民國 立委 連句 生日快樂 都 不敢 波士頓 市政府 慶祝 雙十國慶 今天 循例 在 市府 廣場 升起 中華民國 國旗 展現 對台 友好 駐 波士頓 辦事處 因應 疫情 改採 線上 慶祝 在 臉書 專 受 疫情 影響 駐 洛杉磯 辦事處 今年 改在 線上 舉行 雙十國慶 活動 多名 美國 政要 南加州 僑領 及 友邦 代表 以 視訊 方式 現身 祝 中華民國 紐約 曼哈頓 華埠 今天 歡慶 中華民國 年 雙十國慶 受 疫情 限制 活動 簡化為 升 國旗 向 國父 銅像 獻花 及 國慶 茶會 雖少 了 封街 遊行 兩岸 關係 為 貿易 環境 埋下 隱憂 蔡英文 總統 昨 日 於 國慶 大會 演說 時 主動 向 陸方 拋出 邀請 她 表示 只要 北京 當局 有心 化解 對立 昨天 雙十國慶 大會 面對 新冠 病毒 威脅 蔡英文 總統 在 演說 時 特別 感謝 防疫 英雄 大會 除 由 防疫 英雄 領唱 國歌 外 也 安排 防疫 英雄 車隊 針對 總統 蔡英文 昨在 國慶 演說 提出 兩岸 的 穩定 是 雙方 共同 責任 國內 學者 多 認為 蔡 總統 的 用詞 謹慎 避免 刺激 中國 大陸 但 大陸 學者 多&#39;]
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python-notes",
            path: "./nlp"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python-notes'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="text-normalization-eng.html" title="previous page">Text Normalization (English)</a>
    <a class='right-next' id="next-link" href="sklearn.html" title="next page">Machine Learning with Sci-Kit Learn</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alvin Chen<br/>
        
            &copy; Copyright 2020 Alvin Chen.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>